# 混合检索

混合检索（Hybrid Search）是一种结合了**稀疏向量（Sparse Vectors）**和**稠密向量（Dense Vectors）**优势的先进的搜索技术。旨在同时利用稀疏向量的关键词精确匹配能力和稠密向量的语义理解能力，以克服单一向量检索的局限性，从而在各种搜索场景下提供更准确、更鲁棒的搜索结果。

## 稀疏向量 vs 稠密向量

稀疏向量也被称为“词法向量”，是基于词频统计的传统信息检索方法的数学表示。它通常是一个维度极高（与词汇表大小相当）但绝大多数元素为零的向量。它采用精准的“词袋”匹配模型，将文档式微一堆词的集合，不考虑顺序和语法。其中向量的每一个维度都直接对应一个具体的词，非零值则代表该词在文档中的重要性（权重）。这类向量的典型代表是TF-IDF和BM25。其中BM25是目前最成功、应用最广泛的稀疏向量计分算法之一，其核心公式如下：

$$Score(Q,D)=\sum_{i=1}^{n}IDF(q_{i})\cdot\frac{f(q_{i},D)\cdot(k_{1}+1)}{f(q_{i},D)+k_{1}\cdot(1-b+b\cdot\frac{|D|}{avgdl})}$$

其中：

- $IDF(q_i)$
  